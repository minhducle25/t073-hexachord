(function(){"use strict";self.importScripts("https://cdn.jsdelivr.net/npm/@tonejs/midi@2.0.27/build/Midi.js"),self.onmessage=async i=>{try{const s=i.data;if(!s||s.byteLength===0){self.postMessage([]);return}const t=new Midi(s).tracks[0].notes.map((e,r)=>({id:r,pitch:e.midi,time:e.time,duration:e.duration,velocity:e.velocity}));self.postMessage(t)}catch(s){console.error("Failed to process MIDI file:",s),self.postMessage([])}}})();
